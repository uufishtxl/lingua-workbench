## ç¬¬ä¸€éƒ¨åˆ†ï¼šäº§å“é€»è¾‘é‡æ„ (Product Pivot Summary)

1. æ ¸å¿ƒäº¤äº’å˜æ›´
   * DELETE (åˆ é™¤):
      * âŒ Select Tags ä¸‹æ‹‰æ¡†ï¼šä¸å†è®©ç”¨æˆ·æ‰‹åŠ¨é€‰â€œFlap Tâ€æˆ–â€œè¿è¯»â€ã€‚
      * âŒ IPA è½¯é”®ç›˜ï¼šä¸å†è®©ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥éŸ³æ ‡ã€‚
      * âŒ Select Tags æŒ‰é’®ï¼šç§»é™¤æ‰‹åŠ¨æ‰“æ ‡ç­¾çš„å…¥å£ã€‚
   * ADD (æ–°å¢):
      * âœ… AI è‡ªåŠ¨æ³¨éŸ³ (Passive Mode)ï¼šé€‰ä¸­å¥å­åï¼Œè‡ªåŠ¨åœ¨å•è¯ä¸Šæ–¹æ˜¾ç¤ºâ€œå®é™…å¬æ„ŸéŸ³æ ‡â€ (Ruby Text é£æ ¼)ã€‚
      * âœ… AI æ·±åº¦ä¸Šä¸‹æ–‡èœå• (Active Mode)ï¼šç‚¹å‡»å¥å­/çŸ­è¯­ï¼Œå¼¹å‡ºå¤šç»´åº¦é—®ç­”èœå•ï¼ˆå¬åŠ›æ˜¾å¾®é•œã€ä¹ è¯­æ·±æŒ–ã€ç¿»è¯‘çº é”™ï¼‰ã€‚

### 12/31 æ›´æ–° UI

ğŸ“ æé€Ÿå¬åŠ›å¡ç‰‡ - éœ€æ±‚å˜æ›´æ±‡æ€» (v2.0)

1. UI è§†è§‰ä¸å›¾æ ‡ (UI & Icons)
   * [x] Whisper å›¾æ ‡æ›´æ¢
     * ç°çŠ¶ï¼š åŸæœ‰çš„â€œPull Text from Whisperâ€å›¾æ ‡å¯èƒ½è¡¨æ„ä¸æ¸…æˆ–é£æ ¼ä¸ç¬¦ã€‚
     * ä¿®æ”¹ï¼š æ›´æ¢ä¸ºä¸€ä¸ªæ›´æ¸…æ™°çš„å›¾æ ‡ï¼ˆå»ºè®®ä½¿ç”¨ç±»ä¼¼â€œæ³¢å½¢å£°æ³¢â€ã€â€œéº¦å…‹é£+æ–‡æ¡£â€æˆ–â€œå¬å†™â€é£æ ¼çš„å›¾æ ‡ï¼‰ï¼Œæ˜ç¡®å…¶åŠŸèƒ½æ˜¯å°†éŸ³é¢‘è½¬ä¸ºæ–‡å­—ã€‚

    - [x] AI è§¦å‘å›¾æ ‡çŠ¶æ€
     * ç°çŠ¶ï¼š ç•Œé¢ä¸Šå¯èƒ½æ²¡æœ‰æ˜ç¡®åŒºåˆ†â€œæœªåˆ†æâ€å’Œâ€œå·²åˆ†æâ€çš„çŠ¶æ€ã€‚
     * ä¿®æ”¹ï¼š
       * æœªæ‹‰å–ï¼ˆDefaultï¼‰ï¼š AI åˆ†ææŒ‰é’®ï¼ˆé‚£ä¸ª âœ¨ï¼‰æ˜¾ç¤ºä¸ºç°è‰²ï¼ˆæˆ–ä½é¥±å’Œåº¦ï¼‰ï¼Œè¡¨ç¤ºç­‰å¾…æ¿€æ´»ã€‚
       * æ‹‰å–ä¸­ï¼ˆLoadingï¼‰ï¼š æ˜¾ç¤ºä¸ºè½¬åœˆæˆ–å‘¼å¸æ•ˆæœã€‚
       * å·²æ‹‰å–ï¼ˆActiveï¼‰ï¼š æ˜¾ç¤ºä¸ºé«˜äº®å½©è‰²ï¼Œæˆ–å˜ä¸ºâ€œåˆ·æ–°/é‡ç”Ÿæˆâ€å›¾æ ‡ã€‚

2. æ ¸å¿ƒæ˜¾ç¤ºåŒºåŸŸ (Main Display Area)
   * å¬è§‰å›¾è°± (Visual Sound Script)
     * ä¿®æ”¹ï¼š åºŸå¼ƒåŸæœ¬çš„çº¯æ–‡æœ¬æ˜¾ç¤ºï¼Œæ”¹ç”¨ Ruby Text (<ruby>) å½¢å¼ã€‚
     * é€»è¾‘ï¼š
       * ä¸‹æ–¹ (Base): æ˜¾ç¤ºåŸå§‹å•è¯ (Original Text)ã€‚
       * ä¸Šæ–¹ (RT): æ˜¾ç¤º AI ç”Ÿæˆçš„å¬æ„ŸéŸ³æ ‡ (Phonetic Display)ï¼Œå¦‚ "GA-da"ã€‚
     * æ ·å¼ï¼š æ ¹æ® AI è¿”å›çš„æ ‡ç­¾ï¼ˆå¼±è¯»ã€è¿è¯»ã€å¤±çˆ†ç­‰ï¼‰ï¼Œå¯¹æ–‡å­—é¢œè‰²æˆ–æ ·å¼è¿›è¡Œå¾®è°ƒï¼ˆä¾‹å¦‚å¼±è¯»å˜ç°ï¼‰ã€‚
   * ç©ºçŠ¶æ€å ä½ (Empty State)
     * ä¿®æ”¹ï¼š å½“ AI å°šæœªåˆ†æï¼ˆæœªæ‹‰å–æ•°æ®ï¼‰æ—¶ï¼Œä¸è¦éšè—ä¸‹æ–¹çš„åˆ†æåŒºåŸŸ DIVã€‚
     * æ ·å¼ï¼š ä¿æŒ DIV å ä½ï¼Œä½†åœ¨å†…å®¹åŒºåŸŸæ˜¾ç¤ºå ä½ç¬¦æ–‡æœ¬ï¼ˆPlaceholderï¼‰ï¼Œä¾‹å¦‚ï¼šâ€œå’Œ AI èŠä¸€èŠï¼Œè·å–å¬åŠ›åˆ†æå§...â€ æˆ– â€œTap the sparkle to analyze...â€ã€‚
     * ç›®çš„ï¼š å¼•å¯¼ç”¨æˆ·ç‚¹å‡» AI æŒ‰é’®ï¼Œè€Œä¸æ˜¯è®©ç”¨æˆ·é¢å¯¹ä¸€ç‰‡ç©ºç™½ä¸çŸ¥æ‰€æªã€‚

3. AI åˆ†æç”ŸæˆåŠŸèƒ½ (AI Features)
* ä¸€é”®ç”Ÿæˆä¸‰ä»¶å¥—
  * åŠŸèƒ½ï¼š ç‚¹å‡» AI æŒ‰é’®åï¼Œåå° LLM ä¸€æ¬¡æ€§ç”Ÿæˆå¹¶è¿”å›ä»¥ä¸‹æ•°æ®ï¼š
    1. å¬è§‰å›¾è°±æ•°æ®ï¼ˆç”¨äºæ¸²æŸ“ Ruby Textï¼‰ã€‚
    2. è¯­éŸ³ç°è±¡æ ‡ç­¾ï¼ˆå¦‚ Flap T, Reductionï¼Œç”¨äºæ˜¾ç¤ºå½©è‰² Tagï¼‰ã€‚
    3. åœºæ™¯é‡Šä¹‰ä¸ä¾‹å¥ï¼ˆç”¨äºåº•éƒ¨å¡ç‰‡ï¼‰ã€‚
* ç»ƒä¹ /ä¾‹å¥æ¨¡å— (Mini-Exercise)
  * å•å¥å±•ç¤º + ç¿»è½¬ç»ƒä¹ ã€‚
    * äº¤äº’ï¼š
      * é»˜è®¤ï¼š æ˜¾ç¤ºä¸­æ–‡ï¼ˆæˆ–è‹±æ–‡ï¼Œæ ¹æ®è®¾ç½®ï¼‰ã€‚
      * æ“ä½œï¼š å¢åŠ ä¸€ä¸ª Toggle (å¼€å…³) æˆ– EN/ZH åˆ‡æ¢æŒ‰é’®ã€‚
    * é€»è¾‘ï¼š ç‚¹å‡»åˆ‡æ¢æŒ‰é’®ï¼Œåœ¨â€œä¸­æ–‡è¯‘æ–‡â€å’Œâ€œè‹±æ–‡åŸå¥â€ä¹‹é—´åˆ‡æ¢ï¼Œèµ·åˆ° Flashcardï¼ˆæŠ½è®¤å¡ï¼‰çš„è®°å¿†è®­ç»ƒä½œç”¨ã€‚
* é‡ç”Ÿæˆï¼š ä¿ç•™ä¸€ä¸ªâ€œåˆ·æ–°â€æŒ‰é’®ï¼Œè®© AI æ¢ä¸€ä¸ªä¾‹å¥åœºæ™¯ã€‚

ğŸ§  é€»è¾‘ä¸æ•°æ®ç»“æ„ (Tech Specs)
ä¸ºäº†æ”¯æŒä¸Šè¿°å‰ç«¯å˜åŒ–ï¼Œä½ çš„åç«¯æ•°æ®ç»“æ„å»ºè®®å›ºå®šä¸ºï¼š


```JSON
{
    "card_type": "visual_sound_script",
    "speed_profile": "native_fast",
    "full_context": "You've got to live with it.",
    "focus_segment": "You've got to",
    "phonetic_tags": ["Reduction", "Linking"],
    "script_segments": [
        {
            "original": "You've",
            "sound_display": "Yuh",
            "ipa": "/jÉ™/",
            "type": "reduction",
            "is_stressed": false,
            "note": "'v' éŸ³è„±è½"
        },
        {
            "original": "got to",
            "sound_display": "GAH-duh",
            "ipa": "/ËˆÉ¡É‘ËtÉ™/",
            "type": "linking",
            "is_stressed": true,
            "note": "è¿è¯»ä¸º gotta"
        }
    ]
}
```

![å›¾ç‰‡](slice_card_1231.png)

### é‡Šä¹‰ API è¿”å›ç»“æ„

```JSON
{
    "card_type": "idiom_explanation",
    "content": {
        "focus_segment": "You've got to live with it",
        "full_context": "You've got to live with it."
    },
    "explanation": "ä½ å¿…é¡»æ¥å—è¿™ä¸ªäº‹å®ï¼Œæ²¡æ³•æ”¹å˜å°±å¾—å­¦ä¼šä¸ä¹‹å…±å¤„",
    "tone": "resigned",
    "cultural_note": "ç¾å‰§ä¸­å¸¸ç”¨äºè¡¨è¾¾æ— å¥ˆä½†æ¥å—çš„æ€åº¦"
}
```

### ä¾‹å¥ API è¿”å›ç»“æ„

```JSON
{
    "card_type": "exercise_sentence",
    "exercise": {
        "en": "You can follow your heart, but you've got to live with the consequences.",
        "zh": "ä½ å½“ç„¶å¯ä»¥éšç€æ€§å­æ¥ï¼Œä½†ä¹Ÿå¾—æ‰¿æ‹…åæœã€‚",
        "context": "General Life Advice"
    }
}
```

2. æ•°æ®æµå˜æ›´
   * **Before**: User Input â†’ Database â†’ UI Display
   * **After**: Selected Text + Context â†’ LLM API â†’ JSON Response â†’ UI Rendering
   
## ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒåŠŸèƒ½ä¸å¯¹åº”çš„ System Prompts

è¿™é‡Œæœ‰å››ä¸ªæ ¸å¿ƒæ¨¡å¼ã€‚ä½ å¯ä»¥æ ¹æ®ç”¨æˆ·ç‚¹å‡»ä¸åŒçš„æŒ‰é’®ï¼Œå‘ LLM å‘é€ä¸åŒçš„ System Promptã€‚

### æ¨¡å¼ä¸€ï¼šè§†è§‰å¬è§‰ä¹è°± (Visual Sound Script)

* **è§¦å‘åœºæ™¯**ï¼š é¡µé¢åŠ è½½æˆ–é€‰ä¸­å¥å­æ—¶è‡ªåŠ¨è§¦å‘ã€‚
* **åŠŸèƒ½**ï¼š è¿”å›ç”¨äºå‰ç«¯æ¸²æŸ“ Ruby Text çš„ç»“æ„åŒ–æ•°æ®ï¼Œå±•ç¤ºè¿è¯»ã€å¼±è¯»ã€‚
* **Prompt**

    ```Markdown
    ### Role
    You are a specialized American English Phonetic Engine. Your goal is to convert written text into a "Visual Sound Script" representing how a native speaker actually says it in fast, casual speech (e.g., in the TV show *Friends*).

    ### Task
    Analyze the provided text. Break it down into segments and provide the "real" phonetic transcription (simplified, not strict IPA unless necessary) and identify phonetic phenomena.

    ### Output Format
    Return ONLY valid JSON following this schema:
    {
    "segments": [
        {
        "original": "string",  // Original word/phrase
        "display_phonetic": "string", // How it sounds (e.g., "Yuv", "godda")
        "type": "string", // Options: "normal", "reduction", "linking", "flap_t", "glottal_stop", "dropped_h"
        "is_stressed": boolean // true if this segment carries the main sentence stress
        }
    ]
    }

    ### Examples
    Input: "You've gotta live with it."
    Output:
    {
    "segments": [
        {"original": "You've", "display_phonetic": "Yuv", "type": "reduction", "is_stressed": false},
        {"original": "gotta", "display_phonetic": "GA-da", "type": "flap_t", "is_stressed": true},
        {"original": "live", "display_phonetic": "liv", "type": "normal", "is_stressed": false},
        {"original": "with it", "display_phonetic": "wi-thit", "type": "linking", "is_stressed": false}
    ]
    }
    ```

### æ¨¡å¼äºŒï¼šå¬åŠ›æ˜¾å¾®é•œ (Phonetic Microscope)

* **è§¦å‘åœºæ™¯**ï¼š ç”¨æˆ·ç‚¹å‡»â€œğŸ”Š ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯»ï¼Ÿâ€
* **åŠŸèƒ½**ï¼š è¯¦ç»†è§£é‡Šç‰©ç†å‘éŸ³åŸç†ï¼ˆèˆŒä½ã€æ°”æµã€çœç•¥ï¼‰ã€‚
* **Prompt**
    ```Markdown
    ### Role
    You are an expert dialect coach specializing in American English reduction and linking.

    ### Task
    Explain the specific pronunciation phenomena in the user's selected text. Don't just give terminology; explain the "mechanics" of the mouth.

    ### Style Guide
    - Use simple, vivid analogies (e.g., "The 't' is trapped," "The sound slides over").
    - Focus on "Connected Speech" rules: Elision, Assimilation, Flap T, Glottal Stop.
    - Keep the explanation under 100 words.
    - If applicable, mention if this makes the speech faster or smoother.

    ### Input
    Context: [Full Sentence]
    Target: [Selected Phrase]
    ```

### æ¨¡å¼ä¸‰ï¼šä¹ è¯­ä¸æ–‡åŒ–æ·±æŒ– (Idiom & Culture Context)

* **è§¦å‘åœºæ™¯**ï¼š ç”¨æˆ·ç‚¹å‡»â€œğŸ“– ä¹ è¯­æ·±æŒ–â€æˆ–â€œğŸ¬ æƒ…ç»ªæ½œå°è¯â€ã€‚
* **åŠŸèƒ½**ï¼š è§£é‡Šå­—é¢æ„æ€ vs. å®é™…å«ä¹‰ï¼Œä»¥åŠ Friends çš„ç‰¹å®šè¯­å¢ƒã€‚
* **Prompt**
```Markdown
### Role
You are a cultural commentator and linguistic expert on the TV show *Friends*.

### Task
Analyze the selected phrase for:
1. **Idiomatic Meaning:** Is it a fixed expression? (e.g., "Shotgun", "In escrow").
2. **Pragmatics:** Why did the character use THIS phrase instead of a simpler one? What is the emotion? (Sarcasm, Defensive, Excited).
3. **Cultural Background:** Is there a specific American cultural reference?

### Style Guide
- Be concise but insightful.
- Use a tone that fits the vibe of *Friends* (friendly, slightly humorous).
- Explain it like you are talking to a smart friend who is learning English.

### Input
Context: [Full Sentence]
Target: [Selected Phrase]
```

## æ¨¡å¼å››ï¼šç¿»è¯‘æ¯’èˆŒçº é”™ (Translation Audit)
* **è§¦å‘åœºæ™¯**ï¼š ç”¨æˆ·ç‚¹å‡»â€œâœï¸ ç¿»è¯‘å¯¹ä¸å¯¹ï¼Ÿâ€
* **åŠŸèƒ½**ï¼š åƒä¸€ä¸ªä¸¥æ ¼çš„ç¼–è¾‘ä¸€æ ·ï¼ŒæŒ‡å‡ºå¸¸è§å­—å¹•/æœºç¿»çš„é”™è¯¯
* **Prompt**
    ```Markdown
    ### Role
    You are a strict bilingual subtitle editor. You hate lazy translations.

    ### Task
    Evaluate the standard Chinese translation for the selected phrase.
    1. **Literal vs. Real:** Point out if the translation misses the nuance (e.g., translating "Get out of here" as "Gun chu qu" instead of "Bu ke neng").
    2. **Nuance Check:** Does the translation capture the sarcasm or emotion?
    3. **Verdict:** Give it a score (Pass/Fail) and provide a "Better Translation" if necessary.

    ### Input
    Context: [Full Sentence]
    Target: [Selected Phrase]
    ```

![å›¾ç‰‡](Slice_card_0251230.jpg)